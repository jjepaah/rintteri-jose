# ================= MCU =================
[mcu]
serial: /dev/serial/by-id/usb-Prusa_Research__prusa3d.com__Original_Prusa_i3_MK2_CZPX3419X003XK43457-if00
baud: 250000

# ================= Stepper motors =================
[stepper_x]
step_pin: PD7
dir_pin: !PD6
enable_pin: !PC6
step_distance: 0.0125
endstop_pin: ^PC0
position_min: 0
position_max: 250
homing_speed: 50

[stepper_y]
step_pin: PC3
dir_pin: PC2
enable_pin: !PC1
step_distance: 0.0125
endstop_pin: ^PC4
position_min: 0
position_max: 210
homing_speed: 50

[stepper_z]
step_pin: PB5
dir_pin: PB4
enable_pin: !PB3
step_distance: 0.0025
endstop_pin: probe:z_virtual_endstop
position_min: 0
position_max: 210

[extruder_stepper]
step_pin: PD7
dir_pin: !PD6
enable_pin: !PC6
step_distance: 0.002 # adjust to your filament
# This is usually handled in [extruder] section

# ================= Extruder =================
[extruder]
step_pin: PD7
dir_pin: !PD6
enable_pin: !PC6
microsteps: 16
rotation_distance: 33.500
nozzle_diameter: 0.400
heater_pin: PE5           # Extruder heater MOSFET
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PF0           # Extruder thermistor
min_temp: 15
max_temp: 305
control: pid
pid_kp: 27.007
pid_ki: 1.286
pid_kd: 141.786
filament_diameter: 1.750

# ================= Heated Bed =================
[heater_bed]
heater_pin: PE4           # Bed MOSFET
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PF1           # Bed thermistor
control: pid
pid_kp: 126.13
pid_ki: 4.30
pid_kd: 924.76
min_temp: 0
max_temp: 120

# ================= Probe =================
[probe]
pin: PC5
x_offset: -43
y_offset: -11
z_offset: 0
speed: 5.0
samples: 3

[bltouch]
sensor_pin: ^PC5
x_offset: -43
y_offset: -11
z_offset: 0

# ================= Endstops =================
[endstop_phase]
# Optional, handled by probe and stepper config

# ================= Display =================
[display]
lcd_type: ssd1309
i2c_bus: i2c1b
menu_timeout: 30
# If using stock Prusa Mini Rambo display, this should match I2C address
# ssd1309 is common for small OLED screens

# ================= Safety & Options =================
[fan]
pin: PH4

[virtual_sdcard]
path: ~/printer_data/gcodes

[force_move]
enable_force_move: True
